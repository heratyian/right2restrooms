<head>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
</head>
<body>
  <p style="color: green"><%= notice %></p>

  <div id="map"></div>

  <script>
      var api_key='<%=ENV["MAPBOX_API_KEY"]%>';
      mapboxgl.accessToken = api_key;
      const map = new mapboxgl.Map({
          container: 'map', // container ID
            style: 'mapbox://styles/mapbox/streets-v12', // style URL
          center: [-87.623177, 41.881832], // starting position [lng, lat]
          zoom: 9, // starting zoom
      });     

    map.addControl(new mapboxgl.GeolocateControl({
      positionOptions: {
          enableHighAccuracy: true
      },
      trackUserLocation: true,
      showUserHeading: true
    }));

    const nav = new mapboxgl.NavigationControl({
    visualizePitch: true
    });
    map.addControl(nav, 'bottom-right');
      
  </script>



  <div id="bathrooms">
    <% @bathrooms.each do |bathroom| %>
      <%= render bathroom %>
      <p>
        <%= link_to "Show this bathroom", bathroom %>
      </p>
    <% end %>
  </div>

  <div id="add-link">
  <%= link_to "Add a new bathroom to our database", new_bathroom_path %>
  </div>
</body>
